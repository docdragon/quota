
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tạo Báo Giá Chuyên Nghiệp</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="header-bar no-print">
        <div id="tabs-container"></div>
        <div id="header-right-side">
            <button id="quote-list-btn">Danh sách</button>
            <div id="user-profile">
                <img id="user-pic" src="" alt="User avatar">
                <span id="user-name"></span>
                <button id="logout-btn">Đăng xuất</button>
            </div>
        </div>
    </div>

    <div class="page">
        <header>
            <div class="company-info">
                <input type="text" id="company-name" class="company-name-input" placeholder="Tên Công Ty Của Bạn">
                <input type="text" id="company-address" class="company-details-input" placeholder="Địa chỉ">
                <input type="text" id="company-contact" class="company-details-input" placeholder="Điện thoại | Email">
                <input type="text" id="company-bank" class="company-details-input" placeholder="Số tài khoản ngân hàng">
            </div>
            <div class="quote-title">
                <h2>BÁO GIÁ</h2>
                <p>Số: <input type="text" id="quote-number" value="BG-2025-001"></p>
                <p>Ngày: <span id="quote-date"></span></p>
            </div>
        </header>

        <section class="client-info">
             <div class="client-info-grid">
                <label for="client-name">Kính gửi:</label>
                <input type="text" id="client-name" placeholder="Tên khách hàng / Tên công ty">
                <label for="client-phone">Điện thoại:</label>
                <input type="text" id="client-phone" placeholder="Số điện thoại">
                <label for="client-address">Địa chỉ:</label>
                <input type="text" id="client-address" placeholder="Địa chỉ khách hàng">
            </div>
        </section>

        <section class="quote-details">
            <table id="quote-table">
                <thead>
                    <tr>
                        <th class="col-stt">STT</th>
                        <th class="col-content">Nội dung</th>
                        <th class="col-unit">Đơn vị</th>
                        <th class="col-volume">KL (m²)</th>
                        <th class="col-qty">SL</th>
                        <th class="col-price">Đơn giá</th>
                        <th class="col-total">Thành tiền</th>
                        <th class="col-actions actions-col">Xóa</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Rows will be added here by JavaScript -->
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="6" class="total-label"><strong>Tổng cộng</strong></td>
                        <td id="subtotal" class="total-value">0</td>
                        <td class="actions-col"></td>
                    </tr>
                    <tr>
                         <td colspan="6" class="total-label">
                            <strong>Thuế VAT (<input type="number" id="vat-rate" value="10" min="0" max="100">%)</strong>
                        </td>
                        <td id="tax" class="total-value">0</td>
                        <td class="actions-col"></td>
                    </tr>
                    <tr>
                        <td colspan="6" class="total-label grand-total-label"><strong>TỔNG THANH TOÁN</strong></td>
                        <td id="grand-total" class="total-value"><strong>0</strong></td>
                        <td class="actions-col"></td>
                    </tr>
                </tfoot>
            </table>
        </section>

        <div class="table-actions no-print">
            <button id="add-row">+Dòng</button>
            <button id="add-category">+Nhóm</button>
        </div>

        <footer>
            <div class="notes">
                <strong>Ghi chú:</strong>
                <textarea id="notes-area" rows="3"></textarea>
            </div>
            <div class="signature">
                <p><strong>Người lập báo giá</strong></p>
                <p>(Ký và ghi rõ họ tên)</p>
            </div>
        </footer>
    </div>

    <div class="controls no-print">
        <button onclick="window.print()">Xuất PDF / In</button>
    </div>

    <div id="login-overlay" class="no-print">
        <div id="login-box">
            <h2>Chào mừng!</h2>
            <p>Đăng nhập bằng tài khoản Google để lưu và quản lý báo giá của bạn trên trình duyệt này.</p>
            <!-- NOTE: This application requires a Google Client ID to function. -->
            <div id="g_id_onload"
                 data-client_id="YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com"
                 data-context="signin"
                 data-ux_mode="popup"
                 data-callback="handleCredentialResponse"
                 data-auto_prompt="false">
            </div>
            <div class="g_id_signin"
                 data-type="standard"
                 data-shape="rectangular"
                 data-theme="filled_blue"
                 data-text="signin_with"
                 data-size="large"
                 data-logo_alignment="left">
            </div>
        </div>
    </div>

    <div id="quote-list-modal" class="modal-overlay no-print" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Báo giá đã lưu</h2>
                <button id="modal-close-btn" class="close-btn" aria-label="Đóng">&times;</button>
            </div>
            <div class="modal-body">
                <ul id="saved-quotes-list">
                    <!-- Quote items will be populated by JS -->
                </ul>
            </div>
        </div>
    </div>

    <div id="confirm-modal" class="modal-overlay no-print" style="display: none;">
        <div class="modal-content" role="alertdialog" aria-labelledby="confirm-title" aria-describedby="confirm-message">
            <div class="modal-header">
                <h2 id="confirm-title">Xác nhận xóa</h2>
            </div>
            <div class="modal-body">
                <p id="confirm-message">Bạn có chắc chắn muốn xóa mục này không?</p>
            </div>
            <div class="modal-footer">
                <button id="confirm-cancel-btn">Hủy</button>
                <button id="confirm-ok-btn" class="btn-danger">Xóa</button>
            </div>
        </div>
    </div>

    <div id="save-indicator" class="no-print">Đã lưu ✓</div>

    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="script.js"></script>
</body>
</html>
